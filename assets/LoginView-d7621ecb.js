import{Z as x,Y as S,X as B,a0 as k,a2 as C,a3 as t,ab as y,c as e,a7 as a,am as F,an as m,J as M,a8 as N,aj as U}from"./index-df0392b1.js";import{c as q,a as i,u as P,d,V as R}from"./index.esm-19dda2f2.js";import{V as T}from"./VContainer-c6959afa.js";import{V as p}from"./VCol-74ee2234.js";import{V as $}from"./VDivider-c39964c6.js";import{V as j}from"./VRow-b9a24f24.js";const A=U("h1",null,"登入",-1),E={__name:"LoginView",setup(D){const{api:V}=y(),f=x(),c=S(),b=B(),g=q({account:i().required("帳號為必填欄位").min(4,"使用者帳號過短").max(20,"使用者帳號過長"),password:i().required("密碼為必填欄位").min(4,"密碼長度過短").max(20,"密碼長度過長")}),{handleSubmit:w,isSubmitting:h}=P({validationSchema:g}),l=d("account"),n=d("password"),v=w(async u=>{var s,o;try{const{data:r}=await V.post("/users/login",{account:u.account,password:u.password});b.login(r.result),c({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"success",location:"bottom"}}),f.push("/")}catch(r){const _=((o=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";c({text:_,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"warning",location:"bottom"}})}});return(u,s)=>(k(),C(T,null,{default:t(()=>[e(j,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[A]),_:1}),e($),e(p,{cols:"12"},{default:t(()=>[e(R,{disabled:a(h),onSubmit:F(a(v),["prevent"])},{default:t(()=>[e(m,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:a(l).value.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a(l).value.value=o),"error-messages":a(l).errorMessage.value},null,8,["modelValue","error-messages"]),e(m,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:a(n).value.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a(n).value.value=o),"error-messages":a(n).errorMessage.value},null,8,["modelValue","error-messages"]),e(M,{type:"submit",color:"success"},{default:t(()=>[N("登入")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{E as default};
